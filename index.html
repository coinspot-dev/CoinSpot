<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CoinSpot — New Crypto Tracker</title>
  <meta name="description" content="Official tracker for the Believe ecosystem — discover new creator coins, trends, and Believe early." />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect rx='6' x='1' y='1' width='30' height='30' fill='%2300C254'/%3E%3Cpath d='M23.1 10.8l-4.4 4.4m4.4-4.4l-1.7 4.4m1.7-4.4l-4.4 1.7M9.5 23.5l5.9-5.9 5.6 5.6' stroke='%23fff' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E" />
  <meta name="robots" content="noindex" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    :root { --color-primary-green:#00C254; --color-dark-bg:#1A1A1A; --color-very-dark-bg:#121212; --color-card-bg:#222222; }
    html { scroll-behavior:smooth; }
    body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial; background:var(--color-dark-bg); color:#E0E0E0; }
    .text-primary-green{color:var(--color-primary-green);} .bg-primary-green{background:var(--color-primary-green);} .bg-very-dark{background:var(--color-very-dark-bg);} .bg-card{background:var(--color-card-bg);} 
    .btn-primary{transition:all .2s ease; box-shadow:0 4px 15px rgba(0,194,84,.2);} .btn-primary:hover{opacity:.92; box-shadow:0 6px 20px rgba(0,194,84,.4); transform:translateY(-1px);} 
    .table-row-hover:hover{background:#282828 !important;} .coinspot-icon-svg{transform:scale(.9);} 
    .status-banner { position: sticky; top: 64px; z-index: 60; }
    .badge { display:inline-flex; align-items:center; gap:.5rem; padding:.25rem .5rem; border-radius:9999px; font-size:.7rem; border:1px solid }
    .click-zfix { position: relative; z-index: 10; }
  </style>
</head>
<body class="min-h-screen">

  <!-- Top status banner -->
  <div id="statusBanner" class="status-banner hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div id="statusBox" class="mt-3 rounded-lg border px-4 py-3 text-sm flex items-start gap-3"></div>
    </div>
  </div>

  <!-- Navbar -->
  <nav class="bg-very-dark sticky top-0 z-50 shadow-lg border-b border-[#282828] py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
      <a href="#" class="flex items-center space-x-2">
        <div class="w-7 h-7 rounded-lg bg-primary-green flex items-center justify-center scale-110">
          <svg class="coinspot-icon-svg" width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2.5" y="2.5" width="30" height="30" rx="6" fill="#00C254"/>
            <path d="M23.0877 12.0877L18.7308 16.4446M23.0877 12.0877L21.4394 16.4446M23.0877 12.0877L18.7308 13.736" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M11.6667 24.5L17.5 18.6667L23.0833 24.25" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="text-xl font-extrabold text-white tracking-wider">CoinSpot</span>
      </a>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

    <!-- Hero -->
    <header class="text-center py-16">
      <h1 class="text-5xl md:text-6xl font-extrabold text-white mb-3 leading-tight">Where True Creators <span class="text-primary-green">Believe</span> and Build.</h1>
      <p class="text-base md:text-lg text-gray-400 mb-2 tracking-wide uppercase">Official tracker for the Believe ecosystem</p>
      <div class="flex items-center justify-center gap-3">
        <a href="#new-coins" class="btn-primary bg-primary-green text-white px-6 md:px-8 py-3 rounded-xl text-base md:text-lg font-bold shadow-2xl">View New Coins</a>
      </div>
    </header>

    <!-- Filters -->
    <section class="py-12" id="new-coins">
      <div class="flex flex-wrap md:items-center justify-between mb-8 gap-4 click-zfix">
        <h2 class="text-3xl font-bold text-white">New Coin Listings</h2>
        <div class="flex gap-3">
          <button id="sortNewest" type="button"
            class="p-3 rounded-xl bg-primary-green text-white hover:opacity-90 text-sm font-medium cursor-pointer">Newest</button>
          <button id="sortTrending" type="button"
            class="p-3 rounded-xl bg-card border border-[#333333] text-gray-300 hover:bg-[#282828] text-sm font-medium cursor-pointer">Trending</button>
        </div>
      </div>

      <div id="tableSkeleton" class="p-6 space-y-3">
        <div class="animate-pulse h-10 bg-[#2b2b2b] rounded"></div>
        <div class="animate-pulse h-10 bg-[#2b2b2b] rounded"></div>
        <div class="animate-pulse h-10 bg-[#2b2b2b] rounded"></div>
      </div>

      <table class="min-w-full divide-y divide-[#333333] bg-card rounded-2xl overflow-hidden">
        <thead class="bg-[#282828] text-xs text-gray-400 uppercase">
          <tr>
            <th class="px-6 py-3 text-left font-medium">#</th>
            <th class="px-6 py-3 text-left font-medium">Coin</th>
            <th class="px-6 py-3 text-left font-medium">Price</th>
            <th class="px-6 py-3 text-left font-medium">Volume</th>
            <th class="px-6 py-3 text-left font-medium">Change</th>
          </tr>
        </thead>
        <tbody id="tableBody" class="divide-y divide-[#333333] text-sm text-white"></tbody>
      </table>
    </section>
  </main>

  <footer class="bg-very-dark mt-16 py-8 border-t border-[#282828] text-center text-gray-400 text-sm">
    CoinSpot © <span id="year"></span> — Powered by Believe
  </footer>

  <script>
    lucide.createIcons();
    document.getElementById('year').textContent = new Date().getFullYear();

    const API_URL = 'https://api.dexscreener.com/latest/dex/pairs/solana';
    const fmtPrice = (p) => (p<0.01 && p>0 ? `$${p.toFixed(6)}` : `$${(p||0).toFixed(4)}`);
    const fmtMoney = (n) => (n>=1e6?`$${(n/1e6).toFixed(1)}M`:`$${Number(n||0).toLocaleString()}`);
    let all = [];

    async function fetchListings() {
      const res = await fetch(API_URL);
      const data = await res.json();
      return data.pairs.map((p)=>({
        name:p.baseToken?.name||'Unknown',
        ticker:p.baseToken?.symbol||'',
        price:+p.priceUsd||0,
        volume:+p.volume?.h24||0,
        change:+p.priceChange?.h24||0
      }));
    }

    function renderTable(list){
      const tb=document.getElementById('tableBody'); tb.innerHTML='';
      list.forEach((x,i)=>{
        const up=x.change>=0;
        tb.innerHTML+=`
          <tr class="table-row-hover">
            <td class="px-6 py-3">${i+1}</td>
            <td class="px-6 py-3">${x.name} (${x.ticker})</td>
            <td class="px-6 py-3">${fmtPrice(x.price)}</td>
            <td class="px-6 py-3">${fmtMoney(x.volume)}</td>
            <td class="px-6 py-3 ${up?'text-primary-green':'text-red-500'}">${x.change.toFixed(2)}%</td>
          </tr>`;
      });
      document.getElementById('tableSkeleton').classList.add('hidden');
    }

    async function bootstrap(){
      try{
        all = await fetchListings();
        renderTable(all);
      }catch(e){
        all=[{name:'Bonk',ticker:'BONK',price:0.000021,volume:299000000,change:7.0}];
        renderTable(all);
      }
    }

    // event delegation fix
    document.addEventListener('click', (e)=>{
      if(e.target.closest('#sortNewest')){
        all.sort((a,b)=>b.volume - a.volume);
        renderTable(all);
      }
      if(e.target.closest('#sortTrending')){
        all.sort((a,b)=>Math.abs(b.change) - Math.abs(a.change));
        renderTable(all);
      }
    });

    bootstrap();
  </script>
</body>
</html>
